{"name":"Naked model","body":"Note: Practicing README driven development. This README isn't quite implemented yet. Still a work in progress.\r\n\r\n# NakedModel\r\nYou create awesome models, why bother with writing yet another passthrough controller or twelve?\r\n\r\nNakedModel wraps up regular Ruby objects in a REST-ish interface, ready\r\nfor Rack mounting. Specialized adapters for ActiveRecord, MongoMapper,\r\nand more are included.\r\n\r\n## Quick Start\r\nInstall the gem.\r\n\r\n```shell\r\n$ gem install naked_model\r\n```\r\n\r\nIn your config.ru:\r\n\r\n```ruby\r\nrequire 'your_models.rb'\r\nrequire 'naked_model'\r\n\r\nrun NakedModel.new( :adapters => :active_record )\r\n```\r\n\r\nAnd run it.\r\n\r\n```shell\r\n$ rackup\r\n...\r\n$ curl localhost:9292/model_class/1\r\n```\r\n```javascript\r\n{\r\n  \"your_model\": \"goes here\"\r\n}\r\n```\r\n\r\n\r\n\r\n## Example\r\nHelpful hint: when dealing with JSON on the console it's useful to do:\r\n```shell\r\nalias pp_json=\"ruby -r json -e 'jj JSON.parse gets'\"\r\n```\r\n\r\nconfig.ru:\r\n\r\n```ruby\r\nrequire 'active_record'\r\n\r\nActiveRecord::Base.establish_connection(\r\n  :adapter => 'sqlite3',\r\n  :database => File.dirname(__FILE__) + \"/nm.sqlite3\"\r\n)\r\n\r\nActiveRecord::Schema.define do\r\n  create_table \"topics\" do |t|\r\n    t.text     \"name\"\r\n  end\r\n  create_table \"comments\" do |t|\r\n    t.text     \"comment\"\r\n    t.integer  \"topic_id\"\r\n    t.timestamps\r\n  end\r\nend\r\n\r\nclass Topic < ActiveRecord::Base\r\n  has_many :comments\r\nend\r\nclass Comment < ActiveRecord::Base\r\n  belongs_to :topic\r\nend\r\n\r\nrequire 'naked_model'\r\nrequire 'naked_model/adapter/active_record'\r\nrun NakedModel.new( :adapters => [NakedModel::Adapter::ActiveRecord::Collection.new, NakedModel::Adapter::ActiveRecord::Object.new] )\r\n```\r\n\r\n```shell\r\n$ rackup\r\n```\r\n\r\nAnd we're off.\r\n\r\nYou now have a webserver up and running, serving your models and\r\nresponding to GETs, POSTs, and PUTs.\r\n\r\nLet's load it up. We'll first post to the collection with a body\r\nrepresenting the new resource.\r\n\r\n```shell\r\n$ curl -s -d '{ \"name\": \"kitties\" }' localhost:9292/topics | pp_json\r\n```\r\n```javascript\r\n{\r\n  \"id\": 1,\r\n  \"name\": \"kitties\",\r\n  \"links\": [\r\n    {\r\n      \"rel\": \"self\",\r\n      \"href\": \"http://localhost:9292/topics/1\"\r\n    },\r\n    {\r\n      \"rel\": \"comments\",\r\n      \"href\": \"http://localhost:9292/topics/1/comments\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nFun things to note! The \"links\" properties include the array of\r\nrelationships that our new topic has. We can use this to post new\r\ncomments to it:\r\n\r\n```shell\r\n$ curl -s -d '{ \"comment\": \"I love kitties.\" }' localhost:9292/topics/1/comments | pp_json\r\n```\r\n```javascript\r\n{\r\n  \"comment\": \"I love kitties.\",\r\n  \"created_at\": \"2011-12-31T11:58:19-08:00\",\r\n  \"id\": 1,\r\n  \"topic_id\": 1,\r\n  \"updated_at\": \"2011-12-31T11:58:19-08:00\",\r\n  \"links\": [\r\n    {\r\n      \"rel\": \"self\",\r\n      \"href\": \"http://localhost:9292/topics/1/comments/1\"\r\n    },\r\n    {\r\n      \"rel\": \"topic\",\r\n      \"href\": \"http://localhost:9292/topics/1/comments/1/topic\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nAnd let's see the results. Our topic:\r\n\r\n```shell\r\n$ curl -s localhost:9292/topics/1 | pp_json\r\n```\r\n```javascript\r\n{\r\n  \"id\": 1,\r\n  \"name\": \"kitties\",\r\n  \"links\": [\r\n    {\r\n      \"rel\": \"self\",\r\n      \"href\": \"http://localhost:9292/topics/1\"\r\n    },\r\n    {\r\n      \"rel\": \"comments\",\r\n      \"href\": \"http://localhost:9292/topics/1/comments\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nAnd the comments for it:\r\n\r\n```shell\r\n$ curl -s localhost:9292/topics/1/comments | pp_json\r\n```\r\n```javascript\r\n[\r\n  {\r\n    \"comment\": \"I love kitties.\",\r\n    \"created_at\": \"2011-12-31T11:58:19-08:00\",\r\n    \"id\": 1,\r\n    \"topic_id\": 1,\r\n    \"updated_at\": \"2011-12-31T11:58:19-08:00\",\r\n    \"links\": [\r\n      {\r\n        \"rel\": \"self\",\r\n        \"href\": \"http://localhost:9292/topics/1/comments/1\"\r\n      },\r\n      {\r\n        \"rel\": \"topic\",\r\n        \"href\": \"http://localhost:9292/topics/1/comments/1/topic\"\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n","tagline":"No fuss, no muss REST Rack interfaces for your models. ActiveRecord and MongoMapper included out of the box.","google":"UA-28915475-1","note":"Don't delete this file! It's used internally to help with page regeneration."}